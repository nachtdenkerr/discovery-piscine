<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			Explode this balloon
		</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
		<script>
			var randomColor = function() {
				const r = Math.floor(Math.random()*256);
				const g = Math.floor(Math.random()*256);
				const b = Math.floor(Math.random()*256);
				return `rgb(${r}, ${g}, ${b})`;
			};
			$(document).ready(function() {
				$('#button').click(function() {
					$('body').css('background',randomColor());
				});
			});
		</script>
		<style>
			.balloon {
				width: 200px;
				height: 200px;
				border-radius: 100px;
				background-color: red;
			}
			body {
				height: 100vh;
				display: flex;
				flex-wrap: wrap;
				background: white;
				align-content: center;
				justify-content: center;
			}
			button {
				width: 200px;
				height: 200px;
				border-radius: 100px;
				border: none;
				background-color: rgba(0, 0, 0, 0);
			}
		</style>
	</head>
	<body>
		<div class="balloon" id="bl">
			<button onclick="onClick()" id="button">
			</button>
		</div>
		<script>
			let clicks = 0;
			let height = 200;
			let width = 200;
			let radius = 100;
			let colorIndex = 0;

			const balloon = document.getElementById("bl");
			const button = document.getElementById("button");

			document.addEventListener('mousemove', e => {
				mouseX = e.clientX;
				mouseY = e.clientY;
			});
			const colors = ["red", "green", "blue"];

			function onClick() {
				clicks += 1;
				colorIndex = (colorIndex + 1) % colors.length;
				balloon.style.backgroundColor = colors[colorIndex];

				width = balloon.offsetWidth;
				if (width <= 420)
				{
					width += 10;
					height = balloon.offsetHeight + 10;
					radius = radius + 5;
				}
				else
				{
					height = 200;
					width = 200;
					radius = 100;
					clicks = 0;
				}
				balloon.style.width = `${width}px`;
				balloon.style.height = `${height}px`;
				balloon.style.borderRadius = `${radius}px`;
				button.style.width = `${width}px`;
				button.style.height = `${height}px`;
				button.style.borderRadius = `${radius}px`;
			};

			setInterval(() => {
				const rect = balloon.getBoundingClientRect();
				const centerX = rect.left + rect.width / 2;
				const centerY = rect.top + rect.height / 2;
				const distSq = (mouseX - centerX)**2 + (mouseY - centerY)**2;
			  
				if (distSq <= (radius)**2 && width > 200) {
					colorIndex = (colorIndex - 1 + colors.length) % colors.length;
					balloon.style.backgroundColor = colors[colorIndex];

					width -= 5;
					height -= 5;
					radius = width / 2;
					balloon.style.width = `${width}px`;
					balloon.style.height = `${height}px`;
					balloon.style.borderRadius = `${radius}px`;
					button.style.width = `${width}px`;
					button.style.height = `${height}px`;
					button.style.borderRadius = `${radius}px`;
				}
			}, 1000);
		</script>
	</body>
</html>